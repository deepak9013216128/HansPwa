{"version":3,"sources":["./src/app/chat-service.service.ts"],"names":[],"mappings":"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","file":"common-es2015.js","sourcesContent":["import { Injectable, EventEmitter } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { timeout, retry, catchError } from 'rxjs/operators';\r\nimport { FindOpenHistoryProfileService } from './find-open-history-profile.service';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ChatServiceService {\r\n  authDataUpdated = new EventEmitter<boolean>();\r\n  profileItem;\r\n  contactNumber;\r\n  loginStatus;\r\n  credits;\r\n  shortList = [];\r\n  rejectList = [];\r\n  actionCount = -2;\r\n  personalProfileData: any;\r\n  familyProfileData: any;\r\n  preferenceProfileData: any;\r\n  pageThreeFilled: boolean = true;\r\n  authorized = new EventEmitter<{\r\n    name,\r\n    photo,\r\n    id,\r\n    isLead\r\n  }>();\r\n\r\n  constructor(public http: HttpClient,\r\n    public itemService: FindOpenHistoryProfileService) { }\r\n\r\n  shouldHitSendMessages = new BehaviorSubject<boolean>(false);\r\n  shouldHitSendMessages$: Observable<boolean> = this.shouldHitSendMessages.asObservable();\r\n\r\n  opensidenav = new BehaviorSubject<boolean>(false);\r\n  opensidenav$: Observable<boolean> = this.opensidenav.asObservable();\r\n\r\n  imgSRC = new BehaviorSubject<string>(null);\r\n  imgSRC$: Observable<string> = this.imgSRC.asObservable();\r\n  formTwoCompleted = new BehaviorSubject<boolean>(false);\r\n  countOfRishtey = 0;\r\n\r\n  selected_country: any;\r\n  selected_states: string = '';\r\n  selected_cities: string = '';\r\n  selected_states_id: string[] = [];\r\n  setProfileData(a: any, b: any) {\r\n    this.personalProfileData = a;\r\n    this.familyProfileData = b;\r\n  }\r\n  setContactNumber(contact: any) {\r\n    this.contactNumber = contact;\r\n  }\r\n  setSharedProfile(profile: any) {\r\n    this.profileItem = profile;\r\n  }\r\n  getSharedProfile() {\r\n    return this.profileItem;\r\n  }\r\n  getContactNumber() {\r\n    return this.contactNumber ? this.contactNumber : localStorage.getItem('mobile_number');\r\n  }\r\n  Analytics(type: string, category: string, action: string) {\r\n    (window as any).ga('send', 'event', category, action, {\r\n      hitCallback: () => {\r\n\r\n        console.log('Tracking ' + type + ' successful');\r\n      }\r\n\r\n    });\r\n    // gtag app + web\r\n    (window as any).gtag('event', category, {\r\n      'action': action\r\n    });\r\n\r\n  }\r\n  setLoginStatus(status: boolean) {\r\n    this.loginStatus = status;\r\n  }\r\n  getLoginStatus() {\r\n    return this.loginStatus;\r\n  }\r\n\r\n  setCredits(credits: string) {\r\n    this.credits = credits;\r\n  }\r\n  getCredits() {\r\n    return this.credits;\r\n  }\r\n  familyDetailsLeft: any[] = [];\r\n  personalDetailsLeft: any[] = [];\r\n  profileCompletionPercent: number = 0;\r\n  personalDetailsList = [];\r\n  familyDetailsList = [];\r\n  totalDetails = 0;\r\n  setProfileCalculations() {\r\n    this.personalDetailsList = ['name', 'birth_date', 'birth_time', 'birth_place', 'college',\r\n      'additional_qualification', 'caste', 'religion',\r\n      'height', 'weight', 'marital_status', 'manglik',\r\n      'food_choice', 'monthly_income', 'degree',\r\n      'company', 'occupation', 'profession', 'working_city',\r\n      'locality', 'email', 'profession', 'locality', 'whats_app_no'];\r\n    this.familyDetailsList = ['about', 'occupation_mother', 'gotra', 'occupation',\r\n      'family_type', 'family_income', 'city', 'house_type', 'livingWithParents'];\r\n    this.totalDetails = this.personalDetailsList.length + this.familyDetailsList.length;\r\n    this.personalDetailsLeft = [];\r\n    this.familyDetailsLeft = [];\r\n    for (let v of this.personalDetailsList) {\r\n      if (this.personalProfileData.hasOwnProperty(v)) {\r\n        if (!this.personalProfileData[v] || this.personalProfileData[v] === \"null\") {\r\n          this.personalDetailsLeft.push(v);\r\n        }\r\n      }\r\n      else this.personalDetailsLeft.push(v);\r\n    }\r\n    for (let v of this.familyDetailsList) {\r\n      if (this.familyProfileData.hasOwnProperty(v)) {\r\n        if (!this.familyProfileData[v] || this.familyProfileData[v] === \"null\") {\r\n          this.familyDetailsLeft.push(v);\r\n        }\r\n      }\r\n      else {\r\n        this.familyDetailsLeft.push(v);\r\n      }\r\n    }\r\n    for (let v of this.personalDetailsLeft) {\r\n      if (this.familyProfileData.hasOwnProperty(v)) {\r\n        this.personalDetailsLeft.splice(this.personalDetailsLeft.indexOf(v));\r\n      }\r\n    }\r\n    console.log(this.personalDetailsLeft);\r\n    console.log(this.familyDetailsLeft);\r\n  }\r\n  setProfileCompletion() {\r\n    this.profileCompletionPercent = Math.ceil(((this.totalDetails - this.personalDetailsLeft.length - this.familyDetailsLeft.length) * 100) / (this.totalDetails));\r\n    localStorage.setItem('profileCompPercent', String(this.profileCompletionPercent));\r\n    console.log('profile completion percent set from chat service');\r\n  }\r\n  getUserProfileData() {\r\n    if (localStorage.getItem('id')) {\r\n      const myprofileData = new FormData();\r\n      myprofileData.append(\r\n        'id', localStorage.getItem('id')\r\n      );\r\n      myprofileData.append('contacted', '1');\r\n      myprofileData.append(\r\n        'is_lead', localStorage.getItem('is_lead')\r\n      );\r\n      // tslint:disable-next-line: max-line-length\r\n      return this.http\r\n        .post<any>(\r\n          'https://partner.hansmatrimony.com/api/getProfile',\r\n          myprofileData\r\n        )\r\n        .pipe(\r\n          timeout(7000),\r\n          retry(2),\r\n          catchError((e) => {\r\n            throw new Error('Server Timeout ' + e);\r\n          })\r\n        )\r\n        .subscribe(\r\n          (data: any) => {\r\n            console.log(data.preferences);\r\n            this.preferenceProfileData = data.preferences ? data.preferences : null;\r\n            this.personalProfileData = data.profile ? data.profile : null;\r\n            this.familyProfileData = data.family ? data.family : null;\r\n\r\n            //setting profile data in chat service for use in popups.\r\n            this.setProfileData(this.personalProfileData, this.familyProfileData);\r\n            this.setProfileCalculations();\r\n            this.setProfileCompletion();\r\n            if (data.profile.photo) {\r\n              this.itemService.setPhotoStatus(true);\r\n            }\r\n          },\r\n          (error: any) => {\r\n            console.log(error);\r\n          }\r\n        );\r\n    } else {\r\n      console.log('Couln\\'t get profiledata');\r\n    }\r\n  }\r\n  setShouldHitSendMessagesToTrue() {\r\n    this.shouldHitSendMessages.next(true);\r\n  }\r\n  setShouldHitSendMessagesToFalse() {\r\n    this.shouldHitSendMessages.next(false);\r\n  }\r\n  opensidenavTrue() {\r\n    this.opensidenav.next(true);\r\n  }\r\n  opensidenavFalse() {\r\n    this.opensidenav.next(false);\r\n  }\r\n}"],"sourceRoot":"webpack:///"}
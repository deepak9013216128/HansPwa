{"version":3,"sources":["src/app/chat-service.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,QAAa,kBAAb;AAoBE,kCAAmB,IAAnB,EACS,WADT,EACmD;AAAA;;AADhC,aAAA,IAAA,GAAA,IAAA;AACV,aAAA,WAAA,GAAA,WAAA;AApBT,aAAA,eAAA,GAAkB,IAAI,0CAAA,CAAA,cAAA,CAAJ,EAAlB;AAKA,aAAA,SAAA,GAAY,EAAZ;AACA,aAAA,UAAA,GAAa,EAAb;AACA,aAAA,WAAA,GAAc,CAAC,CAAf;AAIA,aAAA,eAAA,GAA2B,IAA3B;AACA,aAAA,UAAA,GAAa,IAAI,0CAAA,CAAA,cAAA,CAAJ,EAAb;AAUA,aAAA,qBAAA,GAAwB,IAAI,iCAAA,CAAA,iBAAA,CAAJ,CAA6B,KAA7B,CAAxB;AACA,aAAA,sBAAA,GAA8C,KAAK,qBAAL,CAA2B,YAA3B,EAA9C;AAEA,aAAA,WAAA,GAAc,IAAI,iCAAA,CAAA,iBAAA,CAAJ,CAA6B,KAA7B,CAAd;AACA,aAAA,YAAA,GAAoC,KAAK,WAAL,CAAiB,YAAjB,EAApC;AAEA,aAAA,MAAA,GAAS,IAAI,iCAAA,CAAA,iBAAA,CAAJ,CAA4B,IAA5B,CAAT;AACA,aAAA,OAAA,GAA8B,KAAK,MAAL,CAAY,YAAZ,EAA9B;AACA,aAAA,gBAAA,GAAmB,IAAI,iCAAA,CAAA,iBAAA,CAAJ,CAA6B,KAA7B,CAAnB;AACA,aAAA,cAAA,GAAiB,CAAjB;AAGA,aAAA,eAAA,GAA0B,EAA1B;AACA,aAAA,eAAA,GAA0B,EAA1B;AACA,aAAA,kBAAA,GAA6B,EAA7B;AA4CA,aAAA,iBAAA,GAA2B,EAA3B;AACA,aAAA,mBAAA,GAA6B,EAA7B;AACA,aAAA,wBAAA,GAAmC,CAAnC;AACA,aAAA,mBAAA,GAAsB,EAAtB;AACA,aAAA,iBAAA,GAAoB,EAApB;AACA,aAAA,YAAA,GAAe,CAAf;AAjEwD;;AArB1D;AAAA;AAAA,uCAsCiB,CAtCjB,EAsCyB,CAtCzB,EAsC+B;AAC3B,eAAK,mBAAL,GAA2B,CAA3B;AACA,eAAK,iBAAL,GAAyB,CAAzB;AACD;AAzCH;AAAA;AAAA,yCA0CmB,OA1CnB,EA0C+B;AAC3B,eAAK,aAAL,GAAqB,OAArB;AACD;AA5CH;AAAA;AAAA,yCA6CmB,OA7CnB,EA6C+B;AAC3B,eAAK,WAAL,GAAmB,OAAnB;AACD;AA/CH;AAAA;AAAA,2CAgDkB;AACd,iBAAO,KAAK,WAAZ;AACD;AAlDH;AAAA;AAAA,2CAmDkB;AACd,iBAAO,KAAK,aAAL,GAAqB,KAAK,aAA1B,GAA0C,YAAY,CAAC,OAAb,CAAqB,eAArB,CAAjD;AACD;AArDH;AAAA;AAAA,kCAsDY,IAtDZ,EAsD0B,QAtD1B,EAsD4C,MAtD5C,EAsD0D;AACrD,UAAA,MAAc,CAAC,EAAf,CAAkB,MAAlB,EAA0B,OAA1B,EAAmC,QAAnC,EAA6C,MAA7C,EAAqD;AACpD,YAAA,WAAW,EAAE,uBAAK;AAEhB,cAAA,OAAO,CAAC,GAAR,CAAY,cAAc,IAAd,GAAqB,aAAjC;AACD;AAJmD,WAArD,EADqD,CAQtD;;AACC,UAAA,MAAc,CAAC,IAAf,CAAoB,OAApB,EAA6B,QAA7B,EAAuC;AACtC,sBAAU;AAD4B,WAAvC;AAIF;AAnEH;AAAA;AAAA,uCAoEiB,MApEjB,EAoEgC;AAC5B,eAAK,WAAL,GAAmB,MAAnB;AACD;AAtEH;AAAA;AAAA,yCAuEgB;AACZ,iBAAO,KAAK,WAAZ;AACD;AAzEH;AAAA;AAAA,mCA2Ea,OA3Eb,EA2E4B;AACxB,eAAK,OAAL,GAAe,OAAf;AACD;AA7EH;AAAA;AAAA,qCA8EY;AACR,iBAAO,KAAK,OAAZ;AACD;AAhFH;AAAA;AAAA,iDAuFwB;AACpB,eAAK,mBAAL,GAA2B,CAAC,MAAD,EAAS,YAAT,EAAuB,YAAvB,EAAqC,aAArC,EAAoD,SAApD,EACzB,0BADyB,EACG,OADH,EACY,UADZ,EAEzB,QAFyB,EAEf,QAFe,EAEL,gBAFK,EAEa,SAFb,EAGzB,aAHyB,EAGV,gBAHU,EAGQ,QAHR,EAIzB,SAJyB,EAId,YAJc,EAIA,YAJA,EAIc,cAJd,EAKzB,UALyB,EAKb,OALa,EAKJ,YALI,EAKU,UALV,EAKsB,cALtB,CAA3B;AAMA,eAAK,iBAAL,GAAyB,CAAC,OAAD,EAAU,mBAAV,EAA+B,OAA/B,EAAwC,YAAxC,EACvB,aADuB,EACR,eADQ,EACS,MADT,EACiB,YADjB,EAC+B,mBAD/B,CAAzB;AAEA,eAAK,YAAL,GAAoB,KAAK,mBAAL,CAAyB,MAAzB,GAAkC,KAAK,iBAAL,CAAuB,MAA7E;AACA,eAAK,mBAAL,GAA2B,EAA3B;AACA,eAAK,iBAAL,GAAyB,EAAzB;;AAXoB,qDAYN,KAAK,mBAZC;AAAA;;AAAA;AAYpB,gEAAwC;AAAA,kBAA/B,CAA+B;;AACtC,kBAAI,KAAK,mBAAL,CAAyB,cAAzB,CAAwC,CAAxC,CAAJ,EAAgD;AAC9C,oBAAI,CAAC,KAAK,mBAAL,CAAyB,CAAzB,CAAD,IAAgC,KAAK,mBAAL,CAAyB,CAAzB,MAAgC,MAApE,EAA4E;AAC1E,uBAAK,mBAAL,CAAyB,IAAzB,CAA8B,CAA9B;AACD;AACF,eAJD,MAKK,KAAK,mBAAL,CAAyB,IAAzB,CAA8B,CAA9B;AACN;AAnBmB;AAAA;AAAA;AAAA;AAAA;;AAAA,sDAoBN,KAAK,iBApBC;AAAA;;AAAA;AAoBpB,mEAAsC;AAAA,kBAA7B,EAA6B;;AACpC,kBAAI,KAAK,iBAAL,CAAuB,cAAvB,CAAsC,EAAtC,CAAJ,EAA8C;AAC5C,oBAAI,CAAC,KAAK,iBAAL,CAAuB,EAAvB,CAAD,IAA8B,KAAK,iBAAL,CAAuB,EAAvB,MAA8B,MAAhE,EAAwE;AACtE,uBAAK,iBAAL,CAAuB,IAAvB,CAA4B,EAA5B;AACD;AACF,eAJD,MAKK;AACH,qBAAK,iBAAL,CAAuB,IAAvB,CAA4B,EAA5B;AACD;AACF;AA7BmB;AAAA;AAAA;AAAA;AAAA;;AAAA,sDA8BN,KAAK,mBA9BC;AAAA;;AAAA;AA8BpB,mEAAwC;AAAA,kBAA/B,GAA+B;;AACtC,kBAAI,KAAK,iBAAL,CAAuB,cAAvB,CAAsC,GAAtC,CAAJ,EAA8C;AAC5C,qBAAK,mBAAL,CAAyB,MAAzB,CAAgC,KAAK,mBAAL,CAAyB,OAAzB,CAAiC,GAAjC,CAAhC;AACD;AACF;AAlCmB;AAAA;AAAA;AAAA;AAAA;;AAmCpB,UAAA,OAAO,CAAC,GAAR,CAAY,KAAK,mBAAjB;AACA,UAAA,OAAO,CAAC,GAAR,CAAY,KAAK,iBAAjB;AACD;AA5HH;AAAA;AAAA,+CA6HsB;AAClB,eAAK,wBAAL,GAAgC,IAAI,CAAC,IAAL,CAAW,CAAC,KAAK,YAAL,GAAoB,KAAK,mBAAL,CAAyB,MAA7C,GAAsD,KAAK,iBAAL,CAAuB,MAA9E,IAAwF,GAAzF,GAAiG,KAAK,YAAhH,CAAhC;AACA,UAAA,YAAY,CAAC,OAAb,CAAqB,oBAArB,EAA2C,MAAM,CAAC,KAAK,wBAAN,CAAjD;AACA,UAAA,OAAO,CAAC,GAAR,CAAY,kDAAZ;AACD;AAjIH;AAAA;AAAA,6CAkIoB;AAAA;;AAChB,cAAI,YAAY,CAAC,OAAb,CAAqB,IAArB,CAAJ,EAAgC;AAC9B,gBAAM,aAAa,GAAG,IAAI,QAAJ,EAAtB;AACA,YAAA,aAAa,CAAC,MAAd,CACE,IADF,EACQ,YAAY,CAAC,OAAb,CAAqB,IAArB,CADR;AAGA,YAAA,aAAa,CAAC,MAAd,CAAqB,WAArB,EAAkC,GAAlC;AACA,YAAA,aAAa,CAAC,MAAd,CACE,SADF,EACa,YAAY,CAAC,OAAb,CAAqB,SAArB,CADb,EAN8B,CAS9B;;AACA,mBAAO,KAAK,IAAL,CACJ,IADI,CAEH,kDAFG,EAGH,aAHG,EAKJ,IALI,CAMH,MAAA,CAAA,2CAAA,CAAA,SAAA,CAAA,CAAA,CAAQ,IAAR,CANG,EAOH,MAAA,CAAA,2CAAA,CAAA,OAAA,CAAA,CAAA,CAAM,CAAN,CAPG,EAQH,MAAA,CAAA,2CAAA,CAAA,YAAA,CAAA,CAAA,CAAW,UAAC,CAAD,EAAM;AACf,oBAAM,IAAI,KAAJ,CAAU,oBAAoB,CAA9B,CAAN;AACD,aAFD,CARG,EAYJ,SAZI,CAaH,UAAC,IAAD,EAAc;AACZ,cAAA,OAAO,CAAC,GAAR,CAAY,IAAI,CAAC,WAAjB;AACA,cAAA,KAAI,CAAC,qBAAL,GAA6B,IAAI,CAAC,WAAL,GAAmB,IAAI,CAAC,WAAxB,GAAsC,IAAnE;AACA,cAAA,KAAI,CAAC,mBAAL,GAA2B,IAAI,CAAC,OAAL,GAAe,IAAI,CAAC,OAApB,GAA8B,IAAzD;AACA,cAAA,KAAI,CAAC,iBAAL,GAAyB,IAAI,CAAC,MAAL,GAAc,IAAI,CAAC,MAAnB,GAA4B,IAArD,CAJY,CAMZ;;AACA,cAAA,KAAI,CAAC,cAAL,CAAoB,KAAI,CAAC,mBAAzB,EAA8C,KAAI,CAAC,iBAAnD;;AACA,cAAA,KAAI,CAAC,sBAAL;;AACA,cAAA,KAAI,CAAC,oBAAL;;AACA,kBAAI,IAAI,CAAC,OAAL,CAAa,KAAjB,EAAwB;AACtB,gBAAA,KAAI,CAAC,WAAL,CAAiB,cAAjB,CAAgC,IAAhC;AACD;AACF,aA1BE,EA2BH,UAAC,KAAD,EAAe;AACb,cAAA,OAAO,CAAC,GAAR,CAAY,KAAZ;AACD,aA7BE,CAAP;AA+BD,WAzCD,MAyCO;AACL,YAAA,OAAO,CAAC,GAAR,CAAY,0BAAZ;AACD;AACF;AA/KH;AAAA;AAAA,yDAgLgC;AAC5B,eAAK,qBAAL,CAA2B,IAA3B,CAAgC,IAAhC;AACD;AAlLH;AAAA;AAAA,0DAmLiC;AAC7B,eAAK,qBAAL,CAA2B,IAA3B,CAAgC,KAAhC;AACD;AArLH;AAAA;AAAA,0CAsLiB;AACb,eAAK,WAAL,CAAiB,IAAjB,CAAsB,IAAtB;AACD;AAxLH;AAAA;AAAA,2CAyLkB;AACd,eAAK,WAAL,CAAiB,IAAjB,CAAsB,KAAtB;AACD;AA3LH;;AAAA;AAAA,OAAA;;;;cAoB2B,iDAAA,CAAA,YAAA;;cACH,+DAAA,CAAA,+BAAA;;;;AArBX,IAAA,kBAAkB,GAAA,kCAAA,CAAA,YAAA,CAAA,CAAA,CAH9B,MAAA,CAAA,0CAAA,CAAA,YAAA,CAAA,CAAA,CAAW;AACV,MAAA,UAAU,EAAE;AADF,KAAX,CAG8B,CAAA,EAAlB,kBAAkB,CAAlB","sourcesContent":["import { Injectable, EventEmitter } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { timeout, retry, catchError } from 'rxjs/operators';\r\nimport { FindOpenHistoryProfileService } from './find-open-history-profile.service';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ChatServiceService {\r\n  authDataUpdated = new EventEmitter<boolean>();\r\n  profileItem;\r\n  contactNumber;\r\n  loginStatus;\r\n  credits;\r\n  shortList = [];\r\n  rejectList = [];\r\n  actionCount = -2;\r\n  personalProfileData: any;\r\n  familyProfileData: any;\r\n  preferenceProfileData: any;\r\n  pageThreeFilled: boolean = true;\r\n  authorized = new EventEmitter<{\r\n    name,\r\n    photo,\r\n    id,\r\n    isLead\r\n  }>();\r\n\r\n  constructor(public http: HttpClient,\r\n    public itemService: FindOpenHistoryProfileService) { }\r\n\r\n  shouldHitSendMessages = new BehaviorSubject<boolean>(false);\r\n  shouldHitSendMessages$: Observable<boolean> = this.shouldHitSendMessages.asObservable();\r\n\r\n  opensidenav = new BehaviorSubject<boolean>(false);\r\n  opensidenav$: Observable<boolean> = this.opensidenav.asObservable();\r\n\r\n  imgSRC = new BehaviorSubject<string>(null);\r\n  imgSRC$: Observable<string> = this.imgSRC.asObservable();\r\n  formTwoCompleted = new BehaviorSubject<boolean>(false);\r\n  countOfRishtey = 0;\r\n\r\n  selected_country: any;\r\n  selected_states: string = '';\r\n  selected_cities: string = '';\r\n  selected_states_id: string = '';\r\n  setProfileData(a: any, b: any) {\r\n    this.personalProfileData = a;\r\n    this.familyProfileData = b;\r\n  }\r\n  setContactNumber(contact: any) {\r\n    this.contactNumber = contact;\r\n  }\r\n  setSharedProfile(profile: any) {\r\n    this.profileItem = profile;\r\n  }\r\n  getSharedProfile() {\r\n    return this.profileItem;\r\n  }\r\n  getContactNumber() {\r\n    return this.contactNumber ? this.contactNumber : localStorage.getItem('mobile_number');\r\n  }\r\n  Analytics(type: string, category: string, action: string) {\r\n    (window as any).ga('send', 'event', category, action, {\r\n      hitCallback: () => {\r\n\r\n        console.log('Tracking ' + type + ' successful');\r\n      }\r\n\r\n    });\r\n    // gtag app + web\r\n    (window as any).gtag('event', category, {\r\n      'action': action\r\n    });\r\n\r\n  }\r\n  setLoginStatus(status: boolean) {\r\n    this.loginStatus = status;\r\n  }\r\n  getLoginStatus() {\r\n    return this.loginStatus;\r\n  }\r\n\r\n  setCredits(credits: string) {\r\n    this.credits = credits;\r\n  }\r\n  getCredits() {\r\n    return this.credits;\r\n  }\r\n  familyDetailsLeft: any[] = [];\r\n  personalDetailsLeft: any[] = [];\r\n  profileCompletionPercent: number = 0;\r\n  personalDetailsList = [];\r\n  familyDetailsList = [];\r\n  totalDetails = 0;\r\n  setProfileCalculations() {\r\n    this.personalDetailsList = ['name', 'birth_date', 'birth_time', 'birth_place', 'college',\r\n      'additional_qualification', 'caste', 'religion',\r\n      'height', 'weight', 'marital_status', 'manglik',\r\n      'food_choice', 'monthly_income', 'degree',\r\n      'company', 'occupation', 'profession', 'working_city',\r\n      'locality', 'email', 'profession', 'locality', 'whats_app_no'];\r\n    this.familyDetailsList = ['about', 'occupation_mother', 'gotra', 'occupation',\r\n      'family_type', 'family_income', 'city', 'house_type', 'livingWithParents'];\r\n    this.totalDetails = this.personalDetailsList.length + this.familyDetailsList.length;\r\n    this.personalDetailsLeft = [];\r\n    this.familyDetailsLeft = [];\r\n    for (let v of this.personalDetailsList) {\r\n      if (this.personalProfileData.hasOwnProperty(v)) {\r\n        if (!this.personalProfileData[v] || this.personalProfileData[v] === \"null\") {\r\n          this.personalDetailsLeft.push(v);\r\n        }\r\n      }\r\n      else this.personalDetailsLeft.push(v);\r\n    }\r\n    for (let v of this.familyDetailsList) {\r\n      if (this.familyProfileData.hasOwnProperty(v)) {\r\n        if (!this.familyProfileData[v] || this.familyProfileData[v] === \"null\") {\r\n          this.familyDetailsLeft.push(v);\r\n        }\r\n      }\r\n      else {\r\n        this.familyDetailsLeft.push(v);\r\n      }\r\n    }\r\n    for (let v of this.personalDetailsLeft) {\r\n      if (this.familyProfileData.hasOwnProperty(v)) {\r\n        this.personalDetailsLeft.splice(this.personalDetailsLeft.indexOf(v));\r\n      }\r\n    }\r\n    console.log(this.personalDetailsLeft);\r\n    console.log(this.familyDetailsLeft);\r\n  }\r\n  setProfileCompletion() {\r\n    this.profileCompletionPercent = Math.ceil(((this.totalDetails - this.personalDetailsLeft.length - this.familyDetailsLeft.length) * 100) / (this.totalDetails));\r\n    localStorage.setItem('profileCompPercent', String(this.profileCompletionPercent));\r\n    console.log('profile completion percent set from chat service');\r\n  }\r\n  getUserProfileData() {\r\n    if (localStorage.getItem('id')) {\r\n      const myprofileData = new FormData();\r\n      myprofileData.append(\r\n        'id', localStorage.getItem('id')\r\n      );\r\n      myprofileData.append('contacted', '1');\r\n      myprofileData.append(\r\n        'is_lead', localStorage.getItem('is_lead')\r\n      );\r\n      // tslint:disable-next-line: max-line-length\r\n      return this.http\r\n        .post<any>(\r\n          'https://partner.hansmatrimony.com/api/getProfile',\r\n          myprofileData\r\n        )\r\n        .pipe(\r\n          timeout(7000),\r\n          retry(2),\r\n          catchError((e) => {\r\n            throw new Error('Server Timeout ' + e);\r\n          })\r\n        )\r\n        .subscribe(\r\n          (data: any) => {\r\n            console.log(data.preferences);\r\n            this.preferenceProfileData = data.preferences ? data.preferences : null;\r\n            this.personalProfileData = data.profile ? data.profile : null;\r\n            this.familyProfileData = data.family ? data.family : null;\r\n\r\n            //setting profile data in chat service for use in popups.\r\n            this.setProfileData(this.personalProfileData, this.familyProfileData);\r\n            this.setProfileCalculations();\r\n            this.setProfileCompletion();\r\n            if (data.profile.photo) {\r\n              this.itemService.setPhotoStatus(true);\r\n            }\r\n          },\r\n          (error: any) => {\r\n            console.log(error);\r\n          }\r\n        );\r\n    } else {\r\n      console.log('Couln\\'t get profiledata');\r\n    }\r\n  }\r\n  setShouldHitSendMessagesToTrue() {\r\n    this.shouldHitSendMessages.next(true);\r\n  }\r\n  setShouldHitSendMessagesToFalse() {\r\n    this.shouldHitSendMessages.next(false);\r\n  }\r\n  opensidenavTrue() {\r\n    this.opensidenav.next(true);\r\n  }\r\n  opensidenavFalse() {\r\n    this.opensidenav.next(false);\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///","file":"common-es5.js"}
<main>
    <section>
        <div  *ngFor="let item of profile;let i = index">
        <div class="historyProfile"  >
            <img class="historyImage" #profilePic
            [src]="getProfilePhoto(item,item.profile.photo,item.profile.gender)" 
            (click)="openProfileDialog(item,i)"
            (error) = "onLoadProfileError(item.profile.gender,profilePic)"
            alt="profile picture">

            <div style="position: absolute;top: -15px;
            right: -20px;" *ngIf="item.family == null">
                <button mat-fab id="premiumProfIcon">
                        <img width="30px" src="../../../assets/king.svg" alt="premium profile">
                </button>
            </div>

            <div class="historyDetails">
                <span>
                    {{item.profile.name}} | {{setAge(item.profile.birth_date)}}
                </span><br>
                <span>
                    {{item.family ? item.family.city : item.profile.working_city}} | {{setHeight(item.profile.height)}} 
                    | {{item.family ? item.family.religion : item.profile.religion}}, {{item.family ? item.family.caste : item.profile.caste}} | {{item.profile.occupation}}
                    | {{setIncome(item.profile.monthly_income)}} LPA
                </span>
            </div>

            <div class="historyButtons" *ngIf="type != 'contacted'">

                <button mat-raised-button class="btn" 
                (click)="profileReAnswer(item,'NO',i)"
                style="background-color: #C8C8C8;
                    padding: 20px;
                     border-radius: 10px;"  *ngIf="type !== 'rejected'">
                    <img width="20px" src="../../../assets/closewhite.svg" alt="reject profile">
                </button>

                <button mat-raised-button  class="btn" 
                (click)="profileReAnswer(item,'YES',i)"
                style="background-color: #58D1FD;
                margin-top: 20px;
                padding: 20px;
                 border-radius: 10px;"  *ngIf="type !== 'contacted'">
                <img width="20px" src="../../../assets/phone_white.svg" alt="contact profile">
            </button>

                <button mat-raised-button  class="btn"
                (click)="profileReAnswer(item,'SHORTLIST',i)"
                 style="background-color: #D313AE;margin-top: 20px;
                padding: 20px;
                 border-radius: 10px;" *ngIf="type !== 'interestShown'">
                    <img width="20px" src="../../../assets/heartwhite.svg" alt="shortlist profile">
                </button>

            </div>
        </div>
        <div style="position: relative;text-align: center;" *ngIf="item.family != null && type == 'contacted'">
            <button mat-raised-button class="btn" 
            (click)="call(item.family.mobile)"
            style="background: #58D1FD;margin: 5px 5px;"
            *ngIf="type === 'contacted' && itemService.getPersonalized() === false">
                <img width="20px" src="../../../assets/phonewhite.svg" 
                alt="call profile">
                <span style="color: white;">&nbsp;{{item.family.mobile}}</span>
            </button>
            <button mat-raised-button class="btn" 
            (click)="call(item.family.mobile)"
            style="background: #58D1FD;margin: 5px 5px;"
            *ngIf="type === 'contacted' && itemService.getPersonalized()">
                <img width="20px" src="../../../assets/phonewhite.svg" 
                alt="call profile">
                <span style="color: white;">Matchmaker:&nbsp;{{item.family.mobile}}</span>
            </button>
            <button mat-raised-button class="btn" style="background: blue;margin: 5px 5px;">
                <img width="20px" src="../../../assets/placeholderwhite.png" 
                alt="profile location">
                <span style="color: white;">&nbsp;{{item.family.city}}</span>
            </button>
        </div>
        <hr>
        </div>

    </section>

</main>